
ğŸ§® EJERCICIOS DE MANIPULACIÃ“N DE BASES DE DATOS GRANDES EN R

ğŸ“Š Ejercicio 1: ExploraciÃ³n de una base de datos grande
-----------------------------------------------------
Objetivo: Cargar y examinar un dataset extenso.

# Instalar paquetes si no estÃ¡n
install.packages(c("dplyr", "ggplot2", "nycflights13"))

library(dplyr)
library(ggplot2)
library(nycflights13)

# Usar la base de datos flights (mÃ¡s de 300,000 filas)
data("flights")

# Ver primeras filas
head(flights)

# Dimensiones
dim(flights)

# Columnas disponibles
colnames(flights)

# Resumen estadÃ­stico
summary(flights)

DesafÃ­o: Â¿CuÃ¡ntos vuelos salieron retrasados mÃ¡s de 1 hora?
18813

ğŸ§© Ejercicio 2: Seleccionar y renombrar columnas
------------------------------------------------
Objetivo: Manipular la estructura del data frame.

# Seleccionar columnas especÃ­ficas
vuelos_sel <- select(flights, year, month, day, carrier, dep_delay, arr_delay)

# Renombrar columnas
vuelos_sel <- rename(vuelos_sel, Aerolinea = carrier, Retraso_Salida = dep_delay)

head(vuelos_sel)

DesafÃ­o: Agrega una columna nueva que muestre la diferencia entre retraso de llegada y de salida.


ğŸ§± Ejercicio 3: Filtrado y ordenamiento
---------------------------------------
Objetivo: Extraer subconjuntos especÃ­ficos y ordenar resultados.

# Filtrar vuelos con mÃ¡s de 1 hora de retraso
retrasados <- filter(flights, dep_delay > 60)

# Ordenar por mayor retraso
retrasados <- arrange(retrasados, desc(dep_delay))

head(retrasados)

DesafÃ­o: Â¿CuÃ¡l fue el vuelo con mayor retraso de llegada?


ğŸ“ˆ Ejercicio 4: Crear columnas nuevas y calcular promedios
----------------------------------------------------------
Objetivo: Usar mutate y summarise para crear y resumir informaciÃ³n.

# Nueva columna: duraciÃ³n total del vuelo (en horas)
flights <- mutate(flights, duracion_horas = air_time / 60)

# Calcular promedio de duraciÃ³n y retraso por aerolÃ­nea
resumen <- flights %>%
  group_by(carrier) %>%
  summarise(
    Promedio_duracion = mean(duracion_horas, na.rm = TRUE),
    Promedio_retraso = mean(dep_delay, na.rm = TRUE)
  )

print(resumen)

DesafÃ­o: Â¿QuÃ© aerolÃ­nea tiene el mayor retraso promedio?
F9 20.2

ğŸ§® Ejercicio 5: Agregar tÃ­tulos y modificar nombres de columnas automÃ¡ticamente
-------------------------------------------------------------------------------
Objetivo: Modificar encabezados y limpiar la base.

# Cambiar nombres de todas las columnas a mayÃºsculas
colnames(flights) <- toupper(colnames(flights))

# Verificar cambios
head(flights)

DesafÃ­o: Crea un vector con nombres personalizados y reemplaza los nombres de columnas.


ğŸ“Š Ejercicio 6: Graficar informaciÃ³n agregada
---------------------------------------------
Objetivo: Hacer visualizaciones con ggplot2.

library(ggplot2)

# Promedio de retraso por mes
retraso_mes <- flights %>%
  group_by(MONTH) %>%
  summarise(Promedio_Retraso = mean(DEP_DELAY, na.rm = TRUE))

# GrÃ¡fica
ggplot(retraso_mes, aes(x = MONTH, y = Promedio_Retraso)) +
  geom_line(color = "blue", linewidth = 1.2) +
  geom_point(size = 2) +
  labs(title = "Retraso promedio por mes",
       x = "Mes", y = "Retraso promedio (min)")

DesafÃ­o: Cambia el color y estilo del grÃ¡fico. Â¿En quÃ© mes hay mÃ¡s retraso?


ğŸ§® Ejercicio 7: UniÃ³n de tablas y combinaciÃ³n de datos
------------------------------------------------------
Objetivo: Trabajar con mÃºltiples bases (joins).

# Unir con informaciÃ³n de aerolÃ­neas
data("airlines")

flights_joined <- left_join(flights, airlines, by = c("CARRIER" = "carrier"))

# Verificar
head(select(flights_joined, CARRIER, name))

DesafÃ­o: Filtra vuelos solo de â€œUnited Air Lines Inc.â€ y calcula su retraso medio.


ğŸ“¦ Ejercicio 8: Exportar los datos modificados
----------------------------------------------
Objetivo: Guardar una base de datos procesada.

# Guardar como CSV
write.csv(flights_joined, "vuelos_modificados.csv", row.names = FALSE)

DesafÃ­o: Exporta solo las columnas YEAR, MONTH, ARR_DELAY y CARRIER.


ğŸ“ˆ Ejercicio 9: VisualizaciÃ³n avanzada con facet_wrap
-----------------------------------------------------
Objetivo: Crear mÃºltiples grÃ¡ficos en un mismo panel.

ggplot(flights, aes(x = DEP_DELAY, fill = factor(MONTH))) +
  geom_histogram(binwidth = 10, color = "white") +
  facet_wrap(~MONTH) +
  labs(title = "DistribuciÃ³n de retrasos de salida por mes",
       x = "Retraso (min)", y = "Frecuencia")

DesafÃ­o: Ajusta los intervalos de los histogramas y observa cÃ³mo cambia la distribuciÃ³n.


ğŸ“š Ejercicio 10: DesafÃ­o final â€” Limpieza y anÃ¡lisis de un CSV grande
---------------------------------------------------------------------
Objetivo: Simular un caso real de anÃ¡lisis masivo.

# Leer un CSV grande (puedes usar uno propio o descargar uno pÃºblico)
datos <- read.csv("ventas_grandes.csv")

# Limpiar nombres de columnas
colnames(datos) <- make.names(colnames(datos))

# Filtrar datos de un aÃ±o especÃ­fico
datos_filtrados <- filter(datos, AÃ±o == 2024)

# Crear variable nueva
datos_filtrados <- mutate(datos_filtrados,
                          Ganancia = Precio * Cantidad - Costo)

# Calcular promedios por categorÃ­a
resumen <- datos_filtrados %>%
  group_by(Categoria) %>%
  summarise(Ventas_Totales = sum(Precio * Cantidad),
            Ganancia_Promedio = mean(Ganancia))

# Graficar resultados
ggplot(resumen, aes(x = Categoria, y = Ganancia_Promedio, fill = Categoria)) +
  geom_bar(stat = "identity") +
  labs(title = "Ganancia promedio por categorÃ­a", y = "Ganancia promedio")

DesafÃ­o: Ordena las categorÃ­as de mayor a menor ganancia y guarda el grÃ¡fico como imagen PNG.
